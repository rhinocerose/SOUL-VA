/** Processor [[main]] 

    '../examples/main.soul' modified to include all 'Processors' in 'VA::HighLevel'

    Notes:
    - Tests that all 'Processors' compile without errors
    - command: soul errors errors.soulpatch | echo
    - Only use with CLI/Octave is officially supported
    - Processors are connected in series s.t. their out and in streams match
*/

namespace main
{
    namespace va = VA::HighLevel;

    //effect namespace definitions
    namespace effectIn = va::TheDummy;
    namespace effect1 = va::TheBass;
    namespace effect2 = va::TheChorus;
    namespace effect3 = va::TheSplit;
    namespace effectOut = va::TheExpressor;

    graph Processor [[main]]
    {
        input stream effectIn::InType in;
        output stream effectOut::OutType out;

        //effect processor definitions
        let
        { 
            eIn = effectIn::Processor;
            e1 = effect1::Processor;
            e2 = effect2::Processor;
            e3 = effect3::Processor;
            eOut = effectOut::Processor;
        }

        //connect each effect Processor in series
        connection
        {       
            in -> eIn.in;
            eIn.out -> e1.in;
            e1.out -> e2.in;
            e2.out -> e3.in;
            e3.out -> eOut.in;
            eOut.out -> out;
        }
    }
}